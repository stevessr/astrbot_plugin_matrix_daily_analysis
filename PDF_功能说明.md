# QQ群日常分析插件 - PDF 功能说明

## 概述

本插件现已支持生成 PDF 格式的群聊分析报告，提供更专业的报告输出格式。PDF 引擎已迁移至 Playwright，提供更好的兼容性。

## 功能特性

- 📄 **PDF 报告生成**: 将群聊分析结果导出为精美的 PDF 文档
- 🎨 **专业排版**: 针对 PDF 打印优化的样式设计
- 📊 **完整内容**: 包含所有分析数据（统计信息、话题分析、用户称号、群聊金句）
- 🔧 **灵活配置**: 可自定义输出目录、文件名格式以及**自定义浏览器路径**

## 安装依赖

使用 PDF 功能前，需要安装 playwright 库。有以下几种安装方式：

### 方式一：使用命令安装（推荐）

在群聊中直接使用安装命令：

```
/安装PDF
```

此命令会自动：
- 检查 playwright 是否已安装
- 如未安装，自动安装 playwright 库
- 检查是否需要下载 Chromium 浏览器（已配置自定义路径则跳过）
- 测试 PDF 功能是否正常

### 方式二：手动安装

```bash
pip install playwright
playwright install chromium
```

## 使用方法

### 1. 设置输出格式

使用新增的 `/设置格式` 命令来切换输出格式：

```
/设置格式 pdf
```

### 2. 生成 PDF 报告

设置为 PDF 格式后，使用常规的分析命令：

```
/群分析
```

### 3. 高级配置：自定义浏览器路径

如果您希望使用系统中已有的 Chrome 或 Edge，或者在特定的路径下运行浏览器，可以在配置中设置 `browser_path`：

```json
{
  "browser_path": "C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe"
}
```

## 故障排除

### 1. Playwright 安装失败

请确保您的系统网络能够访问官网下载浏览器内核。如果是在受限环境下，建议使用系统的 Chrome/Edge 并配置 `browser_path`。

### 2. PDF 生成失败

- 检查 `browser_path` 是否正确且可执行。
- 确保系统安装了必要的字体。

## 更新日志

### v1.2.0
- 🚀 **Playwright 迁移**: 替换了不稳定的 pyppeteer。
- 🛠️ **自定义浏览器**: 支持手动指定 Chrome/Edge 路径。
- ⚡ **安装优化**: 自动检测系统浏览器并减少不必要的下载。

## 技术实现

PDF 生成基于以下技术：
- **Playwright**: 现代无头浏览器控制
- **HTML/CSS**: 报告模板和样式
- **异步处理**: 非阻塞的 PDF 生成过程
