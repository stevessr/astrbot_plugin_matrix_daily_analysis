<div align="center">

# Matrix ç¾¤èŠæ—¥å¸¸åˆ†ææ’ä»¶

[![AstrBot](https://img.shields.io/badge/AstrBot-Plugin-ff69b4?style=for-the-badge)](https://github.com/AstrBotDevs/AstrBot)
[![License](https://img.shields.io/badge/License-MIT-green.svg?style=for-the-badge)](LICENSE)

_âœ¨ ä¸€ä¸ªåŸºäº AstrBot çš„æ™ºèƒ½ç¾¤èŠåˆ†ææ’ä»¶ï¼Œèƒ½å¤Ÿç”Ÿæˆç²¾ç¾çš„æ—¥å¸¸åˆ†ææŠ¥å‘Šã€‚ä¸“ä¸º Matrix å¹³å°é€‚é…ã€‚ âœ¨_

</div>

## åŠŸèƒ½ç‰¹è‰²

### ğŸ¯ æ™ºèƒ½åˆ†æ
- **ç»Ÿè®¡æ•°æ®**: å…¨é¢çš„ç¾¤èŠæ´»è·ƒåº¦å’Œå‚ä¸åº¦ç»Ÿè®¡
- **è¯é¢˜åˆ†æ**: ä½¿ç”¨ LLM æ™ºèƒ½æå–ç¾¤èŠä¸­çš„çƒ­é—¨è¯é¢˜å’Œè®¨è®ºè¦ç‚¹
- **ç”¨æˆ·ç”»åƒ**: åŸºäºèŠå¤©è¡Œä¸ºåˆ†æç”¨æˆ·ç‰¹å¾ï¼Œåˆ†é…ä¸ªæ€§åŒ–ç§°å·
- **åœ£ç»è¯†åˆ«**: è‡ªåŠ¨ç­›é€‰å‡ºç¾¤èŠä¸­çš„ç²¾å½©å‘è¨€

### ğŸ“Š å¯è§†åŒ–æŠ¥å‘Š
- **å¤šç§æ ¼å¼**: æ”¯æŒå›¾ç‰‡å’Œæ–‡æœ¬è¾“å‡ºæ ¼å¼
    - **ç²¾ç¾å›¾ç‰‡**: ç”Ÿæˆç¾è§‚çš„å¯è§†åŒ–æŠ¥å‘Š
    - **PDF æŠ¥å‘Š**: ç”Ÿæˆä¸“ä¸šçš„ PDF æ ¼å¼åˆ†ææŠ¥å‘Šï¼ˆéœ€é…ç½®ï¼‰
- **è¯¦ç»†æ•°æ®**: åŒ…å«æ¶ˆæ¯ç»Ÿè®¡ã€æ—¶é—´åˆ†å¸ƒã€å…³é”®è¯ã€é‡‘å¥ç­‰

### ğŸ› ï¸ çµæ´»é…ç½®
- **ç¾¤ç»„ç®¡ç†**: æ”¯æŒæŒ‡å®šç‰¹å®šç¾¤ç»„å¯ç”¨åŠŸèƒ½
- **å‚æ•°è°ƒèŠ‚**: å¯è‡ªå®šä¹‰åˆ†æå¤©æ•°ã€æ¶ˆæ¯æ•°é‡ç­‰å‚æ•°
- **å®šæ—¶ä»»åŠ¡**: æ”¯æŒè®¾ç½®æ¯æ—¥è‡ªåŠ¨åˆ†ææ—¶é—´
- **è‡ªå®šä¹‰ LLM æœåŠ¡** ï¼šæ”¯æŒè‡ªå®šä¹‰æŒ‡å®šçš„ LLM æœåŠ¡

## é…ç½®é€‰é¡¹

> [!NOTE]
> ä»¥ä¸‹é…ç½®æƒ…å†µä»…ä¾›å‚è€ƒï¼Œè¯·ä»”ç»†é˜…è¯»æ’ä»¶é…ç½®é¡µé¢ä¸­å„ä¸ªå­—æ®µçš„è¯´æ˜ï¼Œä»¥æ’ä»¶é…ç½®ä¸­çš„è¯´æ˜ä¸ºå‡†ã€‚

| é…ç½®é¡¹ | è¯´æ˜ | å¤‡æ³¨ |
|--------|------|--------|
| å¯ç”¨è‡ªåŠ¨åˆ†æ | å¯ç”¨å®šæ—¶è§¦å‘è‡ªåŠ¨åˆ†æåŠŸèƒ½éœ€è¦æŒ‰ç…§æ’ä»¶é…ç½®é‡Œé¢çš„è¯´æ˜å¡«å†™ç›¸å…³çš„éœ€è¦çš„å­—æ®µï¼›ç®€ç•¥è¯´æ˜ï¼šæ‰“å¼€è‡ªåŠ¨åˆ†æåŠŸèƒ½ï¼Œåœ¨ç¾¤èŠåˆ—è¡¨ä¸­æ·»åŠ ç¾¤å·æˆ–è€…ä½¿ç”¨ `/åˆ†æè®¾ç½® enable` å¯ç”¨å½“å‰ç¾¤èŠ | é»˜è®¤å…³é—­ï¼Œéœ€è¦å¡«å†™æœºå™¨äºº Matrix User ID (MXID) |
| PDF æ ¼å¼çš„æŠ¥å‘Š | åˆæ¬¡ä½¿ç”¨éœ€è¦ä½¿ç”¨ `/å®‰è£…PDF` å‘½ä»¤å®‰è£…ä¾èµ–ï¼Œé¦–æ¬¡ä½¿ç”¨å‘½ä»¤å®‰è£…ï¼Œæœ€åå‡ºç°æç¤ºå‘Šè¯‰ä½ éœ€è¦é‡å¯ç”Ÿæ•ˆï¼Œæ˜¯å¯¹çš„ï¼Œéœ€è¦é‡å¯ astrbotï¼Œè€Œä¸æ˜¯çƒ­é‡è½½æ’ä»¶ã€‚ | è¾“å‡ºæ ¼å¼éœ€è¦è®¾ç½®ä¸º PDF |
| è‡ªå®šä¹‰ LLM æœåŠ¡ | æ’ä»¶é…ç½®ä¸­å…è®¸ç”¨æˆ·è‡ªè¡Œé€‰å–ä¸ªäººæä¾›çš„ Astrbot æœåŠ¡å•†åˆ—è¡¨ä¸­çš„å¤§è¯­è¨€æ¨¡å‹æœåŠ¡å•† | ç•™ç©ºåˆ™å›é€€åˆ°ç”¨æˆ· Astrbot ç°æœ‰æœåŠ¡å•†ä¸­ç¬¬ä¸€ä¸ªå¯ç”¨æœåŠ¡å•† |

> [!IMPORTANT]
> **PDF åŠŸèƒ½é…ç½®**ï¼šä½¿ç”¨ `/å®‰è£…PDF` å‘½ä»¤åï¼Œéœ€è¦å®Œå…¨é‡å¯ AstrBot æ‰èƒ½ç”Ÿæ•ˆï¼Œçƒ­é‡è½½æ’ä»¶æ— æ•ˆï¼
> PDF æŠ¥å‘Šå°†è‡ªåŠ¨ä¿å­˜åœ¨æ’ä»¶æ•°æ®ç›®å½•çš„ `reports` æ–‡ä»¶å¤¹ä¸­ã€‚

> [!TIP]
> **è‡ªå®šä¹‰ LLM æœåŠ¡**ï¼šæ–°ç‰ˆæœ¬å¼ƒç”¨æ­¤å‰ç¡¬ç¼–ç çš„ provider æä¾›æ–¹å¼ï¼Œé‡‡ç”¨æ›´ç¬¦åˆ Astrbot ç”Ÿæ€çš„æ›´ç”¨æˆ·å‹å¥½çš„é…ç½®æ–¹å¼ï¼Œæ ¹æ®é…ç½®é”®é€‰å– Providerï¼Œæ”¯æŒå¤šçº§å›é€€ï¼š
>    1. å°è¯•ä»é…ç½®è·å–æŒ‡å®šçš„ provider_idï¼ˆå¦‚ topic_provider_idï¼‰
>    2. å›é€€åˆ°ä¸» LLM provider_idï¼ˆllm_provider_idï¼‰
>    3. å›é€€åˆ°å½“å‰ä¼šè¯çš„ Providerï¼ˆé€šè¿‡ umoï¼‰
>    4. å›é€€åˆ°ç¬¬ä¸€ä¸ªå¯ç”¨çš„ Provider

## ä½¿ç”¨æ–¹æ³•

### åŸºç¡€å‘½ä»¤

#### ç¾¤åˆ†æ
```
/ç¾¤åˆ†æ [å¤©æ•°]
```
- åˆ†æç¾¤èŠè¿‘æœŸæ´»åŠ¨
- å¤©æ•°å¯é€‰ï¼Œé»˜è®¤ä¸º 1 å¤©
- ä¾‹å¦‚ï¼š`/ç¾¤åˆ†æ 3` åˆ†ææœ€è¿‘ 3 å¤©çš„ç¾¤èŠ

#### åˆ†æè®¾ç½®
```
/åˆ†æè®¾ç½® [æ“ä½œ]
```
- `enable`: ä¸ºå½“å‰ç¾¤å¯ç”¨åˆ†æåŠŸèƒ½
- `disable`: ä¸ºå½“å‰ç¾¤ç¦ç”¨åˆ†æåŠŸèƒ½
- `status`: æŸ¥çœ‹å½“å‰ç¾¤çš„å¯ç”¨çŠ¶æ€
- ä¾‹å¦‚ï¼š`/åˆ†æè®¾ç½® enable`

#### æ¨¡æ¿è®¾ç½®
```
/æŸ¥çœ‹æ¨¡æ¿
/è®¾ç½®æ¨¡æ¿ [æ¨¡æ¿åç§°æˆ–åºå·]
```
- `/æŸ¥çœ‹æ¨¡æ¿`: æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æ¨¡æ¿åŠé¢„è§ˆå›¾
- `/è®¾ç½®æ¨¡æ¿`: æŸ¥çœ‹å½“å‰æ¨¡æ¿å’Œå¯ç”¨æ¨¡æ¿åˆ—è¡¨
- `/è®¾ç½®æ¨¡æ¿ [åºå·]`: åˆ‡æ¢åˆ°æŒ‡å®šåºå·çš„æ¨¡æ¿
- ä¾‹å¦‚ï¼š`/è®¾ç½®æ¨¡æ¿ 1` æˆ– `/è®¾ç½®æ¨¡æ¿ scrapbook`

## å®‰è£…è¦æ±‚

> [!CAUTION]
> **å¿…éœ€æ¡ä»¶**ï¼š
> - å·²é…ç½® LLM æä¾›å•†ï¼ˆç”¨äºæ™ºèƒ½åˆ†æï¼‰
> - Matrix å¹³å°é€‚é…å™¨ (astrbot_plugin_matrix_adapter)

## æ³¨æ„äº‹é¡¹

> [!WARNING]
> 1. **æ€§èƒ½è€ƒè™‘**: å¤§é‡æ¶ˆæ¯åˆ†æå¯èƒ½æ¶ˆè€—è¾ƒå¤š LLM tokens
> 2. **æ•°æ®å‡†ç¡®æ€§**: åˆ†æç»“æœåŸºäºå¯è·å–çš„ç¾¤èŠè®°å½•ï¼Œå¯èƒ½ä¸å®Œå…¨å‡†ç¡®
> 3. **å›¾ç‰‡å‘é€**: Matrix å¹³å°å‘é€å›¾ç‰‡éœ€è¦å…ˆä¸Šä¼ ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨å¤„ç†ï¼Œä½†éœ€è¦ç½‘ç»œç•…é€š

## è´¡çŒ®

### è´¡çŒ®æŒ‡å—

<div align="center">

![è´¡çŒ®æŒ‡å—](./assets/contribution-guide.jpg)

</div>

### å¼€å‘ç¯å¢ƒè®¾ç½®

ä¸ºäº†ä¿æŒä»£ç è´¨é‡ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨ [pre-commit](https://pre-commit.com/) é’©å­è¿›è¡Œä»£ç è§„èŒƒæ£€æŸ¥å’Œè‡ªåŠ¨ä¿®å¤ã€‚æ‰€æœ‰çš„è´¡çŒ®ä»£ç éƒ½å¿…é¡»é€šè¿‡ pre-commit æ£€æŸ¥ã€‚

#### 1. å®‰è£… pre-commit
```bash
pip install pre-commit
```

#### 2. å®‰è£… git hook
åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œï¼Œè¿™å°†ç¡®ä¿åœ¨æ¯æ¬¡æäº¤æ—¶è‡ªåŠ¨è¿è¡Œæ£€æŸ¥ï¼š
```bash
pre-commit install
```

#### 3. æ‰‹åŠ¨è¿è¡Œæ£€æŸ¥
å¦‚æœéœ€è¦æ‰‹åŠ¨è§¦å‘æ‰€æœ‰æ–‡ä»¶çš„æ£€æŸ¥ï¼ˆæ¨èåœ¨æäº¤å‰è¿è¡Œä¸€æ¬¡ï¼‰ï¼š
```bash
pre-commit run --all-files
```

## è®¸å¯è¯

MIT License

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªæ’ä»¶ï¼
